"use strict";define(["jquery"],function(t){function i(t){this.$ct=t,this.init(),this.bind()}return i.prototype={init:function(){this.page=1,this.isLoad=!1;var i=t("#column1").children().last().offset().top+t("#column1").children().last().height(),e=t("#column2").children().last().offset().top+t("#column1").children().last().height(),o=t("#column3").children().last().offset().top+t("#column1").children().last().height();this.columnHeight=[i,e,o],t(".get-back").hide()},bind:function(){var i=this;this.imgarr=[],this.titlearr=[],this.contentarr=[],t(".load-more").one("click",function(e){e.preventDefault(),i.isLoad=!0,t(".load-more a").text("Loading..."),t.get("./loadMore.json").done(function(e){for(var o=0;o<e.url.length;o++)i.imgarr.push(e.url[o]),i.titlearr.push(e.title[o]),i.contentarr.push(e.content[o]);i.isLoad=!1,i.getpages(i.page),t(".get-back").fadeIn(500),t(".load-more").on("click",function(e){e.preventDefault(),t(".get-back").fadeIn(500),t(".load-more a").text("Loading..."),i.getpages(i.page)}),t(".get-back").on("click",function(e){e.preventDefault(),i.isLoad||(t(".loaded").parents(".portfolio-content").fadeOut(500,function(){t(".loaded").parents(".portfolio-content").remove()}),i.init(),t(".get-back").hide(),t(".load-more a").text("loadmore"))})})})},getImages:function(t,i){i(this.imgarr.slice(3*(t-1),3*t),this.titlearr.slice(3*(t-1),3*t),this.contentarr.slice(3*(t-1),3*t))},getpages:function(t){if(!this.isLoad){var i=this;this.getImages(this.page,function(t,e,o){i.images=t,i.titles=e,i.contents=o,i.count=0,i.loadNext(i.count)})}},creatImg:function(i,e){var o="";o+='<div class="portfolio-content">',o+='<div class="portfolio-link">',o+='<div class="portfolio-hover">',o+='<div class="portfolio-hover-content">',o+='<i class="iconfont icon-icon1"></i>',o+="</div></div></div>",o+='<div class="portfolio-context">',o+="<h4>"+this.titles[i]+"</h4>",o+="<p>"+this.contents[i]+"</p>",o+="</div></div>",this.$ct.eq(e).append(o);var n=t('<img class="loaded">'),a=this;n.attr("src",this.images[i]),this.$ct.eq(e).find(".portfolio-link").last().prepend(n),n.load(function(){a.columnHeight[e]+=n.parents(".portfolio-content").height(),a.count+=1,a.loadNext(a.count)})},loadNext:function(i){if(this.images[i]){var e=this.getShortest();this.creatImg(i,e),this.isLoad=!0}else this.isLoad=!1,t(".load-more a").text("Load More"),this.page+=1,this.imgarr[3*(this.page-1)]||t(".load-more a").text("No More")},getShortest:function(){for(var t=0,i=0;i<this.columnHeight.length;i++)this.columnHeight[t]>this.columnHeight[i]&&(t=i);return t}},{Creat:i}});